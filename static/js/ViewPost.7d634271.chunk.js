"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[288],{397:function(e,t,n){n.r(t);var i=n(4165),s=n(5861),a=n(4942),r=n(1413),l=n(9439),d=n(2791),c=n(7689),o=n(2950),u=n(238),x=n(1313),m=n(3358),p=n(1921),h=n(1578),v=n(3853),f=n(1906),b=n(8617),j=n(9126),w=n(71),g=n(9635),k=n(184);t.default=function(){var e=(0,d.useRef)(null),t=(0,c.UO)().id,n=(0,u._q)(t,{refetchOnMountOrArgChange:!0}),N=n.isError,C=n.data,Z=(0,o.iq)(t).data,y=(0,x.T)(),S=(0,d.useState)(""),_=(0,l.Z)(S,2),E=_[0],T=_[1],O=(0,o.WT)(),I=(0,l.Z)(O,2),A=I[0],D=(I[1].isSuccess,(0,u.em)()),R=(0,l.Z)(D,1)[0],U=(0,u.Vy)(),P=(0,l.Z)(U,2),K=P[0],F=(P[1].isSuccess,(0,o.Tv)()),W=(0,l.Z)(F,2),z=W[0],H=(W[1].isSuccess,(0,x.C)(p.aT)),L=(0,d.useState)(!1),B=(0,l.Z)(L,2),V=B[0],q=B[1],Q=(0,c.s0)(),M=(0,d.useState)(""),Y=(0,l.Z)(M,2),G=Y[0],J=Y[1],X=(0,d.useState)({title:"",text:""}),$=(0,l.Z)(X,2),ee=$[0],te=$[1],ne=function(e){te((0,r.Z)((0,r.Z)({},ee),{},(0,a.Z)({},e.target.name,e.target.value)))},ie=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s,a,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.target.files){e.next=10;break}return n=new FormData,s=t.target.files[0],n.append("image",s),e.next=7,f.Z.post("/upload",n);case 7:a=e.sent,r=a.data,J(r.url);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t).unwrap();case 2:Q("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K((0,r.Z)((0,r.Z)({},ee),{},{id:t,imageUrl:G})).unwrap();case 2:q(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.postId,s=t.comment,A({postId:n,comment:s}),T("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){C&&y((0,m.wi)(C))}),[C]);var le={visible:function(e){return{opacity:1,y:0,transition:{delay:.1*e}}},hidden:{opacity:0,y:40}};return(0,k.jsxs)("div",{className:"relative bg-white dark:bg-[#292a2d] min-h-[600px] w-full mt-[40px] rounded-3xl p-20 max-md:p-2",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsxs)("button",{onClick:function(){return Q("/")},className:"flex items-center mr-2 justify-between w-[100px] bg-black rounded-md text-white px-2 h-10",children:[(0,k.jsx)("div",{children:"Back"}),(0,k.jsx)("div",{children:(0,k.jsx)(w.O8Q,{color:"white",size:"30px"})})]}),(null===C||void 0===C?void 0:C.user.id)===(null===H||void 0===H?void 0:H.id)&&(0,k.jsxs)("div",{className:"flex justify-between top-7 right-7 w-[220px] h-10 rounded-md",children:[(0,k.jsxs)("button",{className:"flex items-center justify-between bg-black text-white rounded-md p-1 w-[100px] h-10",onClick:function(){return C&&te({title:C.title,text:C.text}),void q(!V)},children:[(0,k.jsx)("div",{children:"Update"}),(0,k.jsx)("div",{children:(0,k.jsx)(v.IYd,{color:"white",size:"30px"})})]}),(0,k.jsxs)("button",{onClick:function(){return se(t)},className:"flex items-center justify-between bg-black text-white rounded-md p-1 w-[100px] h-10",children:[(0,k.jsx)("div",{children:"Delete"}),(0,k.jsx)("div",{children:(0,k.jsx)(h.EF5,{color:"white",size:"30px"})})]})]})]}),N&&(0,k.jsx)("div",{className:"text-[40px] text-red-800 font-black",children:"the post has been deleted or the post does not exist"}),H&&V&&(0,k.jsxs)("div",{className:"flex flex-col justify-between mb-14 mt-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-bold text-base",children:"Title"}),(0,k.jsx)("input",{className:"dark:bg-black dark:text-white text-black bg-[#ccc] rounded h-10 w-full p-2 mb-10 outline-none",value:ee.title,name:"title",onChange:ne,placeholder:"title",type:"text"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-bold text-base",children:"Text"}),(0,k.jsx)("textarea",{className:"dark:bg-black dark:text-white text-black bg-[#ccc] rounded w-full p-2 mb-10 min-h-[100px] max-h-[200px] outline-none",value:ee.text,name:"text",onChange:ne,placeholder:"text..."})]}),(0,k.jsx)("input",{ref:e,className:"hidden",onChange:ie,type:"file"}),(0,k.jsxs)("button",{onClick:function(){var t;return null===(t=e.current)||void 0===t?void 0:t.click()},className:"bg-black text-white w-[200px] mx-auto mb-8 px-3 flex justify-between items-center  rounded-md p-1",children:[(0,k.jsx)("div",{children:"Download Image"}),(0,k.jsx)("div",{children:(0,k.jsx)(j.QNI,{size:"40px"})})]}),G&&(0,k.jsx)("img",{className:"w-full rounded-xl mb-10",src:"".concat({NODE_ENV:"production",PUBLIC_URL:"/frontend-blog-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL).concat(G),alt:"postImage"}),(0,k.jsx)("button",{className:"text-white bg-black rounded-md w-[50%] h-10 mx-auto",onClick:function(){return ae(t)},children:"Update"})]}),(0,k.jsx)("h1",{className:"dark:text-[#999999] text-[36px] font-bold mt-8",children:null===C||void 0===C?void 0:C.title}),(0,k.jsx)("div",{className:"text-[12px] text-gray-400 mb-9",children:null===C||void 0===C?void 0:C.createdAt}),(0,k.jsx)("div",{className:"mb-4",children:null!==C&&void 0!==C&&C.imageUrl?(0,k.jsx)("img",{className:"w-full rounded-xl",src:"".concat({NODE_ENV:"production",PUBLIC_URL:"/frontend-blog-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL).concat(null===C||void 0===C?void 0:C.imageUrl),alt:"postImg"}):(0,k.jsx)("img",{className:"w-full rounded-xl",src:"https://via.placeholder.com/800x400.jpg?text=No+Image",alt:"postImg"})}),(0,k.jsx)("p",{className:"dark:text-[#999] text-[20px] mb-7",children:null===C||void 0===C?void 0:C.text}),(0,k.jsx)("div",{className:"mb-14",children:null===Z||void 0===Z?void 0:Z.map((function(e,n){return(0,k.jsxs)(g.E.div,{variants:le,initial:"hidden",animate:"visible",custom:n,className:"relative bg-[#e4e3e3] dark:bg-[#333633] dark:text-[#999999] mb-7 rounded-md",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{children:(0,k.jsx)(b.fbd,{size:"20px"})}),(0,k.jsx)("div",{className:"ml-1 overflow-hidden overflow-ellipsis whitespace-nowrap",children:e.user.userName})]}),(0,k.jsx)("div",{className:"ml-2 my-2",children:e.comment}),(null===H||void 0===H?void 0:H.id)===e.user.id&&(0,k.jsx)("button",{className:"absolute top-3 right-2",onClick:function(){return z({postId:t,commentId:e.id})},children:(0,k.jsx)(h.EF5,{size:"30px"})})]},n)}))}),!N&&H&&(0,k.jsxs)("div",{className:"flex justify-between max-sm:flex-col",children:[(0,k.jsx)("input",{className:"w-[75%] pl-4 rounded-md dark:bg-gray-500 dark:border-0 border-[#000] border-[1px] h-11 outline-none max-sm:w-full mb-4",value:E,onChange:function(e){return T(null===e||void 0===e?void 0:e.target.value)},type:"text"}),(0,k.jsx)("button",{className:"w-[20%] dark:bg-gray-500 bg-black text-white h-11 rounded-md font-bold max-sm:w-full",onClick:function(){return re({postId:t,comment:E})},children:"Add Comment"})]})]})}}}]);
//# sourceMappingURL=ViewPost.7d634271.chunk.js.map
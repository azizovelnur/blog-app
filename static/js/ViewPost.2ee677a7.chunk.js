"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[288],{397:function(e,t,n){n.r(t);var s=n(4165),i=n(5861),r=n(4942),a=n(1413),l=n(9439),c=n(2791),d=n(7689),o=n(2950),u=n(238),x=n(1313),m=n(3358),p=n(1921),h=n(1578),f=n(3853),v=n(1906),b=n(8617),j=n(9126),w=n(71),g=n(9635),k=n(184);t.default=function(){var e=(0,c.useRef)(null),t=(0,d.UO)().id,n=(0,u._q)(t,{refetchOnMountOrArgChange:!0}),N=n.isError,Z=n.data,y=(0,o.iq)(t).data,C=(0,x.T)(),I=(0,c.useState)(""),S=(0,l.Z)(I,2),_=S[0],z=S[1],T=(0,o.WT)(),U=(0,l.Z)(T,2),E=U[0],O=(U[1].isSuccess,(0,u.em)()),A=(0,l.Z)(O,1)[0],D=(0,u.Vy)(),F=(0,l.Z)(D,2),q=F[0],Q=(F[1].isSuccess,(0,o.Tv)()),B=(0,l.Z)(Q,2),M=B[0],R=(B[1].isSuccess,(0,x.C)(p.aT)),V=(0,c.useState)(!1),W=(0,l.Z)(V,2),Y=W[0],G=W[1],H=(0,d.s0)(),J=(0,c.useState)(""),K=(0,l.Z)(J,2),L=K[0],P=K[1],X=(0,c.useState)({title:"",text:""}),$=(0,l.Z)(X,2),ee=$[0],te=$[1],ne=function(e){te((0,a.Z)((0,a.Z)({},ee),{},(0,r.Z)({},e.target.name,e.target.value)))},se=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n,i,r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.target.files){e.next=10;break}return n=new FormData,i=t.target.files[0],n.append("image",i),e.next=7,v.Z.post("/upload",n);case 7:r=e.sent,a=r.data,P(a.url);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t).unwrap();case 2:H("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q((0,a.Z)((0,a.Z)({},ee),{},{_id:t,imageUrl:L})).unwrap();case 2:G(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.postId,i=t.comment,E({postId:n,comment:i}),z("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){Z&&C((0,m.wi)(Z))}),[Z]);var le={visible:function(e){return{opacity:1,y:0,transition:{delay:.1*e}}},hidden:{opacity:0,y:40}};return(0,k.jsxs)("div",{className:"relative bg-white dark:bg-[#292a2d] min-h-[600px] w-full mt-[40px] rounded-3xl p-20 max-md:p-2",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsxs)("button",{onClick:function(){return H("/")},className:"flex items-center mr-2 justify-between w-[100px] bg-black rounded-md text-white px-2 h-10",children:[(0,k.jsx)("div",{children:"Back"}),(0,k.jsx)("div",{children:(0,k.jsx)(w.O8Q,{color:"white",size:"30px"})})]}),(null===Z||void 0===Z?void 0:Z.user._id)===(null===R||void 0===R?void 0:R._id)&&(0,k.jsxs)("div",{className:"flex justify-between top-7 right-7 w-[220px] h-10 rounded-md",children:[(0,k.jsxs)("button",{className:"flex items-center justify-between bg-black text-white rounded-md p-1 w-[100px] h-10",onClick:function(){return Z&&te({title:Z.title,text:Z.text}),void G(!Y)},children:[(0,k.jsx)("div",{children:"Update"}),(0,k.jsx)("div",{children:(0,k.jsx)(f.IYd,{color:"white",size:"30px"})})]}),(0,k.jsxs)("button",{onClick:function(){return ie(t)},className:"flex items-center justify-between bg-black text-white rounded-md p-1 w-[100px] h-10",children:[(0,k.jsx)("div",{children:"Delete"}),(0,k.jsx)("div",{children:(0,k.jsx)(h.EF5,{color:"white",size:"30px"})})]})]})]}),N&&(0,k.jsx)("div",{className:"text-[40px] text-red-800 font-black",children:"the post has been deleted or the post does not exist"}),R&&Y&&(0,k.jsxs)("div",{className:"flex flex-col justify-between mb-14 mt-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-bold text-base",children:"Title"}),(0,k.jsx)("input",{className:"dark:bg-black dark:text-white text-black bg-[#ccc] rounded h-10 w-full p-2 mb-10 outline-none",value:ee.title,name:"title",onChange:ne,placeholder:"title",type:"text"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"font-bold text-base",children:"Text"}),(0,k.jsx)("textarea",{className:"dark:bg-black dark:text-white text-black bg-[#ccc] rounded w-full p-2 mb-10 min-h-[100px] max-h-[200px] outline-none",value:ee.text,name:"text",onChange:ne,placeholder:"text..."})]}),(0,k.jsx)("input",{ref:e,className:"hidden",onChange:se,type:"file"}),(0,k.jsxs)("button",{onClick:function(){var t;return null===(t=e.current)||void 0===t?void 0:t.click()},className:"bg-black text-white w-[200px] mx-auto mb-8 px-3 flex justify-between items-center  rounded-md p-1",children:[(0,k.jsx)("div",{children:"Download Image"}),(0,k.jsx)("div",{children:(0,k.jsx)(j.QNI,{size:"40px"})})]}),L&&(0,k.jsx)("img",{className:"w-full rounded-xl mb-10",src:"".concat("https://backend-blog-elnur.onrender.com").concat(L),alt:"postImage"}),(0,k.jsx)("button",{className:"text-white bg-black rounded-md w-[50%] h-10 mx-auto",onClick:function(){return re(t)},children:"Update"})]}),(0,k.jsx)("h1",{className:"dark:text-[#999999] text-[36px] font-bold mt-8",children:null===Z||void 0===Z?void 0:Z.title}),(0,k.jsx)("div",{className:"text-[12px] text-gray-400 mb-9",children:null===Z||void 0===Z?void 0:Z.createdAt}),(0,k.jsx)("div",{className:"mb-4",children:null!==Z&&void 0!==Z&&Z.imageUrl?(0,k.jsx)("img",{className:"w-full rounded-xl",src:"".concat("https://backend-blog-elnur.onrender.com").concat(null===Z||void 0===Z?void 0:Z.imageUrl),alt:"postImg"}):(0,k.jsx)("img",{className:"w-full rounded-xl",src:"https://via.placeholder.com/800x400.jpg?text=No+Image",alt:"postImg"})}),(0,k.jsx)("p",{className:"dark:text-[#999] text-[20px] mb-7",children:null===Z||void 0===Z?void 0:Z.text}),(0,k.jsx)("div",{className:"mb-14",children:null===y||void 0===y?void 0:y.map((function(e,n){return(0,k.jsxs)(g.E.div,{variants:le,initial:"hidden",animate:"visible",custom:n,className:"relative bg-[#e4e3e3] dark:bg-[#333633] dark:text-[#999999] mb-7 rounded-md",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{children:(0,k.jsx)(b.fbd,{size:"20px"})}),(0,k.jsx)("div",{className:"ml-1 overflow-hidden overflow-ellipsis whitespace-nowrap",children:e.user.userName})]}),(0,k.jsx)("div",{className:"ml-2 my-2",children:e.comment}),(null===R||void 0===R?void 0:R._id)===e.user._id&&(0,k.jsx)("button",{className:"absolute top-3 right-2",onClick:function(){return M({postId:t,commentId:e._id})},children:(0,k.jsx)(h.EF5,{size:"30px"})})]},n)}))}),!N&&R&&(0,k.jsxs)("div",{className:"flex justify-between max-sm:flex-col",children:[(0,k.jsx)("input",{className:"w-[75%] pl-4 rounded-md dark:bg-gray-500 dark:border-0 border-[#000] border-[1px] h-11 outline-none max-sm:w-full mb-4",value:_,onChange:function(e){return z(null===e||void 0===e?void 0:e.target.value)},type:"text"}),(0,k.jsx)("button",{className:"w-[20%] dark:bg-gray-500 bg-black text-white h-11 rounded-md font-bold max-sm:w-full",onClick:function(){return ae({postId:t,comment:_})},children:"Add Comment"})]})]})}}}]);
//# sourceMappingURL=ViewPost.2ee677a7.chunk.js.map